{% extends "base.html" %}

{% block title %}Add New IPL Player{% endblock %}

{% block content %}
<h1>Add New Player</h1>

<form action="/submit" method="post">
    <label for="player_id">Player ID:</label>
    <input type="number" id="player_id" name="player_id" required><br><br>

    <label for="player_name">Player Name:</label>
    <input type="text" id="player_name" name="player_name" required><br><br>

    <label for="team">Team:</label>
    <input type="text" id="team" name="team" required><br><br>

    <label for="matches_played">Matches Played:</label>
    <input type="number" id="matches_played" name="matches_played" required><br><br>

    <label for="runs_scored">Runs Scored:</label>
    <input type="number" id="runs_scored" name="runs_scored"><br><br>

    <label for="wickets_taken">Wickets Taken:</label>
    <input type="number" id="wickets_taken" name="wickets_taken"><br><br>

    <button type="submit">Add Player</button>
</form>

<script>
    function deletePlayer(playerId) {
        if (confirm("Are you sure you want to delete this player?")) {
            fetch(/delete/${playerId}, {
                method: 'DELETE',
            })
            .then(response => response.json())
            .then(data => {
                if (data.message === 'Player deleted successfully') {
                    alert(data.message);
                    // Remove the player's row from the table
                    document.getElementById(player-${playerId}).remove();
                } else {
                    alert(data.message);
                }
            })
            .catch(error => {
                console.error("Error:", error);
                alert("An error occurred while deleting the player.");
            });
        }
</script>

{% endblock %}
